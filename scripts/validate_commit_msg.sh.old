#!/usr/bin/env bash

# lê o arquivo da mensagem de commit
commit_msg_file=$1
commit_msg=$(cat "$commit_msg_file")

# Expressão regular para validar o padrão do commit
# Exemplo: feat(ND-1): Mensagem
regex="^(feat|fix|doc|style|refactor|test|chore)\\s?\\([a-zA-Z0-9-]+\\):\\s.+$"

# Verifica se a mensagem de commit corresponde ao padrão
if ! [[ $commit_msg =~ $regex ]]; then
    echo "Erro: A mensagem de commit não segue o padrão correto."
    echo ""
    echo "Padrão esperado: {tipo} ({código-card-jira}): {descrição curta}"
    echo "Exemplo: feat (ND-1): Criação da estrutura inicial do backend"
    echo ""
    exit 1
fi